var app=angular.module("wcce_enquiry_form",["ui.sortable"]);app.service("wcce_enquiry_form_service",function(){var e=[];if(""!==setting_enquiry_form.form_data){angular.forEach(setting_enquiry_form.form_data,function(e,t){setting_enquiry_form.form_data[t].partial=e.partial.split("/")[e.partial.split("/").length-1]});var e=setting_enquiry_form.form_data}return{getField:function(){return e},setField:function(t){e=t}}}),app.controller("postbox_menu",["$scope","wcce_enquiry_form_service",function(e,t){e.postboxClass="";var l=t.getField();e.addFormField=function(e,a,i){i.preventDefault();var s=l.length;switch(e){case"selectbox":l.push({id:s,type:e,selecttype:"radio",label:a,hidden:!1,partial:e+".html",required:!1,options:[{value:"option1",label:"Option 1",selected:!1},{value:"option2",label:"Option 2",selected:!0},{value:"option3",label:"Option 3",selected:!1}],cssClass:""});break;case"email":l.push({id:s,type:e,label:a,hidden:!1,partial:e+".html",placeholder:"",required:!1,cssClass:""});break;case"textarea":l.push({id:s,type:e,label:a,hidden:!1,partial:e+".html",defaultValue:"",limit:"",required:!1,cssClass:""});break;case"checkbox":l.push({id:s,type:e,label:a,hidden:!1,partial:e+".html",defaultValue:"unchecked",required:!1,cssClass:""});break;case"datepicker":l.push({id:s,type:e,label:a,hidden:!1,partial:e+".html",dateformat:"mm/dd/yy",required:!1,cssClass:""});break;case"timepicker":l.push({id:s,type:e,label:a,hidden:!1,partial:e+".html",twentyFour:!1,showSeconds:!0,required:!1,cssClass:""});break;case"captcha":l.push({id:s,type:e,label:a,hidden:!1,partial:e+".html",required:!1});break;case"recaptcha":l.push({id:s,type:e,label:a,hidden:!1,partial:e+".html",site_key:"",secret_key:"",required:!1});break;case"file":l.push({id:s,type:e,label:a,hidden:!1,partial:e+".html",fileSize:"",fileType:[{value:"application/pdf",label:"PDF",selected:!1},{value:"image/jpeg",label:"JPEG",selected:!1},{value:"image/png",label:"PNG",selected:!1},{value:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",label:"DOC",selected:!1},{value:"application/vnd.ms-excel",label:"xls",selected:!1}],required:!1,muliple:!1,cssClass:""});break;case"separator":l.push({id:s,type:e,label:a,hidden:!1,partial:e+".html",cssClass:""});break;default:l.push({id:s,type:e,label:a,hidden:!1,partial:e+".html",placeholder:"",required:!1,cssClass:""})}console.log(l),t.setField(l)},e.togglePostbox=function(){""===e.postboxClass?e.postboxClass="closed":e.postboxClass=""}}]),app.controller("postbox_content",["$scope","$http","wcce_enquiry_form_service",function(e,t,l){var a=l.getField();e.fields=a,e.showSaveSpinner=!1,e.partial_url=setting_enquiry_form.partials,e.togglePostboxField=function(t){e.fields[t].hidden?e.fields[t].hidden=!1:e.fields[t].hidden=!0},e.removeFormField=function(e,t){t.preventDefault(),a.splice(e,1),l.setField(a)},e.addSelectBoxOption=function(t,l){l.preventDefault();var a=e.fields[t].options.length+1;e.fields[t].options.push({value:"option"+a,label:"Option "+a,selected:!1})},e.removeSelectboxOption=function(t,l,a){a.preventDefault(),e.fields[t].options.splice(l,1)},e.fieldSortableOptions={stop:function(e,t){}},e.listOnchange=function(t,l){console.log(e.fields[t].options),angular.forEach(e.fields[t].options,function(a,i){i!==l&&(e.fields[t].options[i].selected=!1)})},e.saveFormData=function(){e.showSaveSpinner=!0;var l=jQuery.param({action:"wcce_enquiry_form_settings_data",form_data:JSON.stringify(e.fields)}),a={headers:{"Content-Type":"application/x-www-form-urlencoded;charset=utf-8;"}};t.post(setting_enquiry_form.ajaxurl,l,a).success(function(t,l,a,i){e.showSaveSpinner=!1}).error(function(t,l,a,i){console.log(t),e.showSaveSpinner=!1})}}]);