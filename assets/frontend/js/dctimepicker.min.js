!function($,window,document){"use strict";function dctimepicker(t,e){this.element=$(t),this.options=$.extend({},defaults,e),this.element.addClass("hasdctimepicker"),this.element.attr("onkeypress","return false;"),this.element.attr("aria-showingpicker","false"),this.createPicker(),this.timepicker=$(".dctimepicker"),this.up=$("."+this.options.upArrow),this.down=$("."+this.options.downArrow),this.separator=$(".dctimepicker__controls__control--separator"),this.hoursElem=$(".dctimepicker__controls__control--hours"),this.minutesElem=$(".dctimepicker__controls__control--minutes"),this.secondsElem=$(".dctimepicker__controls__control--seconds"),this.meridiemElem=$(".dctimepicker__controls__control--meridiem"),this.close=$("."+this.options.close);var i=this.timeArrayFromString(this.options.now);this.options.now=new Date(today.getFullYear(),today.getMonth(),today.getDate(),i[0],i[1],i[2]),this.selectedHour=this.parseHours(this.options.now.getHours()),this.selectedMin=this.parseSecMin(this.options.now.getMinutes()),this.selectedSec=this.parseSecMin(this.options.now.getSeconds()),this.selectedMeridiem=this.parseMeridiem(this.options.now.getHours()),this.setHoverState(),this.attach(t),this.setText(t)}"function"!=typeof String.prototype.endsWith&&(String.prototype.endsWith=function(t){return t.length>0&&this.substring(this.length-t.length,this.length)===t});var isMobile=function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},today=new Date,pluginName="dctimepicker",defaults={now:today.getHours()+":"+today.getMinutes(),twentyFour:!1,upArrow:"dctimepicker__controls__control-up",downArrow:"dctimepicker__controls__control-down",close:"dctimepicker__close",hoverState:"hover-state",title:"Timepicker",showSeconds:!1,secondsInterval:1,minutesInterval:1,beforeShow:null,show:null,clearable:!1};$.extend(dctimepicker.prototype,{showPicker:function(t){"function"==typeof this.options.beforeShow&&this.options.beforeShow(t,this.timepicker);var e=$(t).offset();if($(t).attr({"aria-showingpicker":"true",tabindex:-1}),this.setText(t),this.showHideMeridiemControl(),this.getText(t)!==this.getTime()){var i=this.getText(t).replace(/:/g,"").split(" "),s={};s.hours=i[0],s.minutes=i[2],this.options.showSeconds?(s.seconds=i[4],s.meridiem=i[5]):s.meridiem=i[3],this.setTime(s)}this.timepicker.css({"z-index":1e5+1,position:"absolute",left:e.left,top:e.top+$(t)[0].offsetHeight}).show(),"function"==typeof this.options.show&&this.options.show(t,this.timepicker),this.handleTimeAdjustments(t)},hideTimepicker:function(t){function e(t){setTimeout(function(){$('[aria-showingpicker="false"]').attr("tabindex",t)},400)}this.timepicker.hide();var i={start:function(){var t=$.Deferred();return $('[aria-showingpicker="true"]').attr("aria-showingpicker","false"),t.promise()}};i.start().then(e(0))},createPicker:function(){if(0===$(".dctimepicker").length){var t='<div class="dctimepicker"><p class="dctimepicker__title">'+this.options.title+'<span class="dctimepicker__close"></span></p><ul class="dctimepicker__controls"><li class="dctimepicker__controls__control"><span class="'+this.options.upArrow+'"></span><span class="dctimepicker__controls__control--hours" tabindex="-1">00</span><span class="'+this.options.downArrow+'"></span></li><li class="dctimepicker__controls__control--separator"><span class="dctimepicker__controls__control--separator-inner">:</span></li><li class="dctimepicker__controls__control"><span class="'+this.options.upArrow+'"></span><span class="dctimepicker__controls__control--minutes" tabindex="-1">00</span><span class="'+this.options.downArrow+'"></span></li>';this.options.showSeconds&&(t+='<li class="dctimepicker__controls__control--separator"><span class="dctimepicker__controls__control--separator-inner">:</span></li><li class="dctimepicker__controls__control"><span class="'+this.options.upArrow+'"></span><span class="dctimepicker__controls__control--seconds" tabindex="-1">00</span><span class="'+this.options.downArrow+'"></span> </li>'),t+='<li class="dctimepicker__controls__control"><span class="'+this.options.upArrow+'"></span><span class="dctimepicker__controls__control--meridiem" tabindex="-1">AM</span><span class="'+this.options.downArrow+'"></span></li></ul></div>',$("body").append(t),this.attachKeyboardEvents()}},showHideMeridiemControl:function(){this.options.twentyFour===!1?$(this.meridiemElem).parent().show():$(this.meridiemElem).parent().hide()},showHideSecondsControl:function(){this.options.showSeconds?$(this.secondsElem).parent().show():$(this.secondsElem).parent().hide()},attach:function(t){var e=this;this.options.clearable&&e.makePickerInputClearable(t),$(t).attr("tabindex",0),$(t).on("click focus",function(t){$(e.timepicker).is(":hidden")&&(e.showPicker($(this)),$(e.hoursElem).focus())});var i=function(i){$(e.timepicker).is(":visible")&&($(i.target).is(e.close)?e.hideTimepicker(t):$(i.target).closest(e.timepicker).length||$(i.target).closest($(".hasdctimepicker")).length?i.stopPropagation():e.hideTimepicker(t))};$(document).off("click",i).on("click",i)},attachKeyboardEvents:function(){$(document).on("keydown",$.proxy(function(t){switch(t.keyCode){case 9:"hasdctimepicker"!==t.target.className&&$(this.close).trigger("click");break;case 27:$(this.close).trigger("click");break;case 37:t.target.className!==this.hoursElem[0].className?$(t.target).parent().prevAll("li").not(this.separator.selector).first().children()[1].focus():$(t.target).parent().siblings(":last").children()[1].focus();break;case 39:t.target.className!==this.meridiemElem[0].className?$(t.target).parent().nextAll("li").not(this.separator.selector).first().children()[1].focus():$(t.target).parent().siblings(":first").children()[1].focus();break;case 38:$(":focus").prev().trigger("click");break;case 40:$(":focus").next().trigger("click")}},this))},setTime:function(t){this.setHours(t.hours),this.setMinutes(t.minutes),this.setMeridiem(t.meridiem),this.options.showSeconds&&this.setSeconds(t.seconds)},getTime:function(){return[this.formatTime(this.getHours(),this.getMinutes(),this.getMeridiem(),this.getSeconds())]},setHours:function(t){var e=new Date;e.setHours(t);var i=this.parseHours(e.getHours());this.hoursElem.text(i),this.selectedHour=i},getHours:function(){var t=new Date;return t.setHours(this.hoursElem.text()),t.getHours()},parseHours:function(t){return this.options.twentyFour===!1?(t+11)%12+1:10>t?"0"+t:t},setMinutes:function(t){var e=new Date;e.setMinutes(t);var i=e.getMinutes(),s=this.parseSecMin(i);this.minutesElem.text(s),this.selectedMin=s},getMinutes:function(){var t=new Date;return t.setMinutes(this.minutesElem.text()),t.getMinutes()},parseSecMin:function(t){return(10>t?"0":"")+t},setMeridiem:function(t){var e="";if(void 0===t){var i=this.getMeridiem();e="PM"===i?"AM":"PM"}else e=t;this.meridiemElem.text(e),this.selectedMeridiem=e},getMeridiem:function(){return this.meridiemElem.text()},setSeconds:function(t){var e=new Date;e.setSeconds(t);var i=e.getSeconds(),s=this.parseSecMin(i);this.secondsElem.text(s),this.selectedSec=s},getSeconds:function(){var t=new Date;return t.setSeconds(this.secondsElem.text()),t.getSeconds()},parseMeridiem:function(t){return t>11?"PM":"AM"},handleTimeAdjustments:function(t){var e=0;$(this.up).add(this.down).off("mousedown click touchstart").on("mousedown click",{dctimepicker:this,input:t},function(t){var i=this.className.indexOf("up")>-1?"+":"-",s=t.data;"mousedown"==t.type?e=setInterval($.proxy(function(t){t.dctimepicker.changeValue(i,t.input,this)},this,{dctimepicker:s.dctimepicker,input:s.input}),200):s.dctimepicker.changeValue(i,s.input,this)}).bind("mouseup touchend",function(){clearInterval(e)})},changeValue:function(operator,input,clicked){var target="+"===operator?clicked.nextSibling:clicked.previousSibling,targetClass=$(target).attr("class");targetClass.endsWith("hours")?this.setHours(eval(this.getHours()+operator+1)):targetClass.endsWith("minutes")?this.setMinutes(eval(this.getMinutes()+operator+this.options.minutesInterval)):targetClass.endsWith("seconds")?this.setSeconds(eval(this.getSeconds()+operator+this.options.secondsInterval)):this.setMeridiem(),this.setText(input)},setText:function(t){$(t).val(this.formatTime(this.selectedHour,this.selectedMin,this.selectedMeridiem,this.selectedSec)).change()},getText:function(t){return $(t).val()},formatTime:function(t,e,i,s){var n=t+" : "+e;return this.options.twentyFour&&(n=t+" : "+e),this.options.showSeconds&&(n+=" : "+s),this.options.twentyFour===!1&&(n+=" "+i),n},setHoverState:function(){var t=this;isMobile()||$(this.up).add(this.down).add(this.close).hover(function(){$(this).toggleClass(t.options.hoverState)})},makePickerInputClearable:function(t){$(t).wrap('<div class="clearable-picker"></div>').after("<span data-clear-picker>&times;</span>"),$("[data-clear-picker]").on("click",function(t){$(this).siblings(".hasdctimepicker").val("")})},timeArrayFromString:function(t){if(t.length){var e=t.split(":");return e[2]=e.length<3?"00":e[2],e}return!1},_time:function(){var t=$(this.element).val();return""===t?this.formatTime(this.selectedHour,this.selectedMin,this.selectedMeridiem,this.selectedSec):t}}),$.fn[pluginName]=function(t,e){return $.isFunction(dctimepicker.prototype["_"+t])?$(this).hasClass("hasdctimepicker")?void 0!==e?$.data($(this)[e],"plugin_"+pluginName)["_"+t]():$.data($(this)[0],"plugin_"+pluginName)["_"+t]():void 0:this.each(function(){$.data(this,"plugin_"+pluginName)||$.data(this,"plugin_"+pluginName,new dctimepicker(this,t))})}}(jQuery,window,document);